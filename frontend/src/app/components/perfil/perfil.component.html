<div class="perfil-container">
  <!-- Header -->
  <div class="header">
    <button class="btn-volver" (click)="volver()">
      â† Volver
    </button>
    <h1>Mi Cuenta</h1>
    <div class="acciones-header">
      <button 
        *ngIf="!editMode" 
        class="btn-editar" 
        (click)="activarEdicion()">
        âœï¸ Editar Datos
      </button>
    </div>
  </div>

  <!-- Loading -->
  <div *ngIf="loading" class="loading">
    <div class="spinner"></div>
    <p>Cargando datos...</p>
  </div>

  <!-- Mensaje -->
  <div 
    *ngIf="mensaje" 
    class="mensaje"
    [class.mensaje-success]="tipoMensaje === 'success'"
    [class.mensaje-error]="tipoMensaje === 'error'">
    {{ mensaje }}
  </div>

  <!-- Formulario de datos -->
  <div *ngIf="!loading" class="datos-container">
    <form class="formulario-datos">
      
      <!-- Usuario -->
      <div class="campo-grupo">
        <label for="usuario">Usuario</label>
        <input 
          type="text" 
          id="usuario"
          name="usuario"
          [(ngModel)]="usuario.usuario"
          [readonly]="!editMode"
          class="campo-input"
          [class.campo-readonly]="!editMode"
          placeholder="Ingrese su usuario">
      </div>

      <!-- Nombre -->
      <div class="campo-grupo">
        <label for="nombre">Nombre Completo</label>
        <input 
          type="text" 
          id="nombre"
          name="nombre"
          [(ngModel)]="usuario.nombre"
          [readonly]="!editMode"
          class="campo-input"
          [class.campo-readonly]="!editMode"
          placeholder="Ingrese su nombre completo">
      </div>

      <!-- Fecha de Nacimiento -->
      <div class="campo-grupo">
        <label for="fecha_nacimiento">Fecha de Nacimiento</label>
        <input 
          type="date" 
          id="fecha_nacimiento"
          name="fecha_nacimiento"
          [(ngModel)]="usuario.fecha_nacimiento"
          [readonly]="!editMode"
          class="campo-input"
          [class.campo-readonly]="!editMode">
      </div>

      <!-- Observaciones -->
      <div class="campo-grupo">
        <label for="observaciones">Observaciones</label>
        <textarea 
          id="observaciones"
          name="observaciones"
          [(ngModel)]="usuario.observaciones"
          [readonly]="!editMode"
          class="campo-input campo-textarea"
          [class.campo-readonly]="!editMode"
          rows="3"
          placeholder="Observaciones adicionales (opcional)"></textarea>
      </div>

      <!-- Botones de acciÃ³n -->
      <div class="botones-accion" *ngIf="editMode">
        <button 
          type="button" 
          class="btn-cancelar" 
          (click)="cancelarEdicion()">
          Cancelar
        </button>
        <button 
          type="button" 
          class="btn-guardar" 
          (click)="guardarCambios()"
          [disabled]="loading">
          <span *ngIf="!loading">ğŸ’¾ Guardar Cambios</span>
          <span *ngIf="loading">Guardando...</span>
        </button>
      </div>

    </form>
    </div>

  </div>